<!DOCTYPE html>
<html class="x-admin-sm">
    
    <head>
        <meta charset="UTF-8">
        <title></title>
        <meta name="renderer" content="webkit">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <meta name="viewport" content="width=device-width,user-scalable=yes, minimum-scale=0.4, initial-scale=0.8,target-densitydpi=low-dpi" >
        <link rel="stylesheet" href="__ADMIN__/css/font.css">
        <link rel="stylesheet" href="__ADMIN__/css/xadmin.css">
		<script type="text/javascript" src="__INDEX__/layui/layui.js" charset="utf-8"></script>
		<script src="__INDEX__/js/jquery.min.js"></script>
        <script type="text/javascript" src="__ADMIN__/js/xadmin.js"></script>
		<script type="text/javascript" src="__ADMIN__/js/cityAndPro.js"></script>

        <!-- 让IE8/9支持媒体查询，从而兼容栅格 -->
        <!--[if lt IE 9]>
            <script src="https://cdn.staticfile.org/html5shiv/r29/html5.min.js"></script>
            <script src="https://cdn.staticfile.org/respond.js/1.4.2/respond.min.js"></script>
        <![endif]-->
    </head>
    <body>
        <div class="layui-fluid" style="margin-left:30%;">
            <div class="layui-row">
                <form class="layui-form">
                  <div class="layui-form-item">
                      <label for="title" class="layui-form-label">
                          房名
                      </label>
                      <div class="layui-input-inline">
                          <input type="text" id="title" name="title" required="" lay-verify="required"
                          autocomplete="off" class="layui-input">
                      </div>
                  </div>
				  <div class="layui-form-item">
                      <label for="city" class="layui-form-label">
                          市
                      </label>
                      <div class="layui-input-inline">
							<select name="input_province" id="input_province" class="form-control">
								<option value="">--请选择--</option>
							</select>
					  </div>
                  </div>
				  <div class="layui-form-item">
                      <label for="location" class="layui-form-label">
                          区
                      </label>
                      <div class="layui-input-inline">
							<select name="input_city" id="input_city" class="form-control">
								<option value="">--请选择--</option>
							</select>
					  </div>
                  </div>
				  <div class="layui-form-item">
                      <label for="area" class="layui-form-label">
                          房屋面积
                      </label>
                      <div class="layui-input-inline">
                          <input type="text" id="title" name="title" required="" lay-verify="required"
                          autocomplete="off" class="layui-input">
                      </div>
                  </div>
				  <div class="layui-form-item">
                      <label for="room" class="layui-form-label">
                          房
                      </label>
                      <div class="layui-input-inline" style="width:50px;">
                          <input type="text" id="title" name="title" required="" lay-verify="required"
                          autocomplete="off" class="layui-input">
                      </div>
					  <label for="livingrooms" class="layui-form-label" style="width:3px;" >
							  厅
					  </label>
                      <div class="layui-input-inline" style="width:50px;">
                          <input type="text" id="title" name="title" required="" lay-verify="required"
                          autocomplete="off" class="layui-input">
                      </div>
					  <label for="bathrooms" class="layui-form-label" style="width:3px;">
                          卫
                      </label>
                      <div class="layui-input-inline" style="width:50px;">
                          <input type="text" id="title" name="title" required="" lay-verify="required"
                          autocomplete="off" class="layui-input">
                      </div>
                  </div>  
				  <!-- <div class="layui-form-item">
                      <div class="layui-form-item">
							<div class="layui-inline">
								  <label class="layui-form-label">登记时间</label>
								  <div class="layui-input-inline">
									<input type="text" class="layui-input" id="test11" placeholder="">
								  </div>
							</div>
					   </div>
                  </div> -->
	<!-- 			  <div class="layui-form-item">
                      <label for="host-id" class="layui-form-label">
                          房东id
                      </label>
                      <div class="layui-input-inline">
                          <input type="text" id="title" name="title" required="" lay-verify="required"
                          autocomplete="off" class="layui-input">
                      </div>
                  </div> -->
				  <div class="layui-form-item">
                      <label for="origin" class="layui-form-label">
                          用户提供
                      </label>
                      <div class="layui-input-block">
                        <input type="radio" name="origin" lay-skin="primary" title="是" checked="">
                        <input type="radio" name="origin" lay-skin="primary" title="否">
                      </div>
                  </div>
				  <div class="layui-form-item">
                      <label for="floor" class="layui-form-label">
                          楼层
                      </label>
                      <div class="layui-input-inline">
                          <input type="text" id="title" name="title" required="" lay-verify="required"
                          autocomplete="off" class="layui-input">
                      </div>
                  </div>
				  <div class="layui-form-item">
                      <label for="address" class="layui-form-label">
                          详细地址
                      </label>
                      <div class="layui-input-inline">
                          <input type="text" id="title" name="title" required="" lay-verify="required"
                          autocomplete="off" class="layui-input">
                      </div>
                  </div>
				  <div class="layui-form-item">
                      <label for="description" class="layui-form-label">
                          租房描述
                      </label>
                      <div class="layui-upload">
						  <button type="button" class="layui-btn" id="test1">上传</button> 
						  <div class="layui-form-mid layui-word-aux">
							  <span class="x-red">*</span>只能上传一张图片
						  </div>
							  <div class="layui-upload">
								  
								  <div class="layui-upload-list">
									  <blockquote class="layui-elem-quote layui-quote-nm" style="margin-top: 10px;width:500px;">
											预览图：
											<img class="layui-upload-img" id="demo1">
											<p id="demoText1"></p>
										</blockquote>
								  </div>
							</div>
						<!-- <button type="button" class="layui-btn" id="test9">开始上传</button> -->
					  </div> 
                  </div>
				  <div class="layui-form-item">
                      <label for="decoration" class="layui-form-label">
                          装修情况
                      </label>
                      <div class="layui-upload">
						  <button type="button" class="layui-btn" id="test2">上传</button> 
					   <div class="layui-form-mid layui-word-aux">
                          <span class="x-red">*</span>可上传多张照片
                      </div>
							  <blockquote class="layui-elem-quote layui-quote-nm" style="margin-top: 10px;width:500px;">
									预览图：
									<div class="layui-upload-list" id="demo2" style="width:;"></div>
									<p id="demoText2"></p>
							 </blockquote>
						<!-- <button type="button" class="layui-btn" id="test9">开始上传</button> -->
					  </div>
                  </div>
				  <div class="layui-form-item">
                      <label for="price" class="layui-form-label">
                          租金
                      </label>
                      <div class="layui-input-inline">
                          <input type="text" id="title" name="title" required="" lay-verify="required"
                          autocomplete="off" placeholder="￥" class="layui-input">
                      </div>
                  </div>
				  <div class="layui-form-item">
                      <label for="status" class="layui-form-label">
                          是否出租
                      </label>
                      <div class="layui-input-block">
                        <input type="radio" name="status" lay-skin="primary" title="生效中" checked="">
                        <input type="radio" name="status" lay-skin="primary" title="已过期">
                      </div>
                  </div>
                  </div>
                  
                  <div class="layui-form-item">
                      <label for="L_repass" class="layui-form-label">
                      </label>
                      <button id="submit_t" class="layui-btn" lay-filter="add" lay-submit="" style="margin-left:60px;">
                          确认
                      </button>
                  </div>
              </form>
            </div>
        </div>
        <script>layui.use(['form', 'layer'],
            function() {
                $ = layui.jquery;
                var form = layui.form,
                layer = layui.layer;

                //自定义验证规则
                

                //监听提交
                form.on('submit(add)',
                function(data) {
                    console.log(data);
                    //发异步，把数据提交给php
                    layer.alert("增加成功", {
                        icon: 6
                    },
                    function() {
                        //关闭当前frame
                        xadmin.close();

                        // 可以对父窗口进行刷新 
                        xadmin.father_reload();
                    });
                    return false;
                });

            });</script>
		   <script>
			$(function() {
				var html = "";
				var province_idx;
				$("#input_city").append(html);//append() 方法在被选元素的结尾（仍然在内部）插入指定内容。
 
				$.each(cityMessage, function(idx, item) { //后面的function，把前面的data分割成idx和item，idx是当前遍历元素的索引，item是当前遍历元素本身
					if(item.parid == '1'){
					html += "<option value='" + item.regname + "' exid='" + item.regid + "'>" + item.regname + "</option>";
                    }
			
				});
				$("#input_province").append(html);
				$("#input_province").change(function(e) {
					var province =$(this).val();
					var cityList = [];
					if(province == "") return;
					$("#input_city option").remove();
					var html = "<option value=''>--请选择--</option>";
					
//					获取已选择的省份的数组下标
					$.each(cityMessage, function(idx, item) {
						if(province == item.regname && item.parid == '1') {
							province_idx=idx
						}
					})
					
//					获取已选择的省份的城市列表
					$.each(cityMessage, function(idx, item) {
						if(cityMessage[idx].parid == cityMessage[province_idx].regid) {
							cityList.push(cityMessage[idx])
						}
					})
					
//					添加城市信息给标签
					if(cityList instanceof Array && cityList.length>0){
						$.each(cityList, function(idx, item) {
							console.log(item)
							html += "<option value='" + item.regname + "' exid='" + item.regid + "'>" + item.regname + "</option>";
							
						});
					}else{
						html += "<option value='" + cityMessage[province_idx].regname + "' exid='" + cityMessage[province_idx].regid + "'>" + cityMessage[province_idx].regname + "</option>";
							
					}
					$("#input_city").append(html);
				});
			});
		</script>
		<!-- <script>
		layui.use('laydate', function(){
		  var laydate = layui.laydate;  
		  //自定义格式
		  laydate.render({
			elem: '#test11'
			,format: 'yyyy年MM月dd日'
		  });
		  laydate.render({
			elem: '#test12'
			,format: 'dd/MM/yyyy'
		  });
		  laydate.render({
			elem: '#test13'
			,format: 'yyyyMMdd'
		  });
		  laydate.render({
			elem: '#test14'
			,type: 'time'
			,format: 'H点m分'
		  });
		  laydate.render({
			elem: '#test15'
			,type: 'month'
			,range: '~'
			,format: 'yyyy-MM'
		  });
		  laydate.render({
			elem: '#test16'
			,type: 'datetime'
			,range: '到'
			,format: 'yyyy年M月d日H时m分s秒'
		  });
		  //自定义事件
		  laydate.render({
			elem: '#test24'
			,trigger: 'mousedown'
		  });
		  
		  //直接嵌套显示
		  laydate.render({
			elem: '#test-n1'
			,position: 'static'
		  });
		  laydate.render({
			elem: '#test-n2'
			,position: 'static'
			,lang: 'en'
		  });
		  laydate.render({
			elem: '#test-n3'
			,type: 'month'
			,position: 'static'
		  });
		  laydate.render({
			elem: '#test-n4'
			,type: 'time'
			,position: 'static'
		  });
		});
		</script> -->
		
		<script>
			layui.use('upload', function(){
			  var $ = layui.jquery
			  ,upload = layui.upload;
			  
			 //普通图片上传
				  var uploadInst = upload.render({
					elem: '#test1'
					,url: '/upload/'
					,choose: function(obj){
					  //预读本地文件示例，不支持ie8
					  obj.preview(function(index, file, result){
						$('#demo1').attr('src', result); //图片链接（base64）
					  });
					}
					,done: function(res){
					  //如果上传失败
					  if(res.code > 0){
						return layer.msg('上传失败');
					  }
					  //上传成功
					}
					,error: function(){
					  //演示失败状态，并实现重传
					  var demoText1 = $('#demoText1');
					  demoText1.html('<span style="color: #FF5722;">上传失败</span> <a class="layui-btn layui-btn-xs demo-reload">重试</a>');
					  demoText1.find('.demo-reload').on('click', function(){
						uploadInst.upload();
					  });
					}
				  });
			  //多图片上传
			  var uploadInst2 =upload.render({
				elem: '#test2'
				,url: '/upload/'
				,multiple: true
				,choose: function(obj){
				  //预读本地文件示例，不支持ie8
				  obj.preview(function(index, file, result){
					$('#demo2').append('<img src="'+ result +'" alt="'+ file.name +'" class="layui-upload-img">')
				  });
				}
				,done: function(res){
				  //上传完毕
				}
				,error: function(){
				  //演示失败状态，并实现重传
				  var demoText2 = $('#demoText2');
				  demoText2.html('<span style="color: #FF5722;">上传失败</span> <a class="layui-btn layui-btn-xs demo-reload">重试2</a>');
				  demoText2.find('.demo-reload').on('click', function(){
					uploadInst2.upload();
				  });
				}
			  });
			 
			  
			  
			});
			</script>
    </body>

</html>
